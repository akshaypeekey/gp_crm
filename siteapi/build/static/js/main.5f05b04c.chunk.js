(this.webpackJsonpsiteapi=this.webpackJsonpsiteapi||[]).push([[0],{156:function(e,t,a){},157:function(e,t,a){},213:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a(0),c=a.n(r),i=a(11),o=a.n(i);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(156);var s=a(23),l=a(14),j=a(28),d=(a(157),a(25)),p=a(258),h=a(253),b=a(275),m=a(273),u=a(104),g=a.n(u),x=a(254),O=a(255),f=a(256),v=a(257),w=a(133),k=a.n(w),y=a(251),S=a(17),C=a(260),A=a(264),N=a(263),_=a(259),L=a(261),I=a(262),P=a(103),W=a(134),B=a.n(W),D=240;function T(e,t,a,n,r,c,i,o,s){return{Icon:e,Source:t,Name:a,Address:n,Phone:r,Rating:c,Listed:i,Status:o,Action:s}}var R=Object(y.a)((function(e){return{root:{display:"flex"},drawer:Object(d.a)({},e.breakpoints.up("sm"),{width:D,flexShrink:0}),appBar:Object(d.a)({},e.breakpoints.up("sm"),{width:"calc(100% - ".concat(D,"px)"),marginLeft:D}),menuButton:Object(d.a)({marginRight:e.spacing(2)},e.breakpoints.up("sm"),{display:"none"}),toolbar:e.mixins.toolbar,drawerPaper:{width:D},content:{flexGrow:1,padding:e.spacing(3)}}}));var M=function(e){var t=e.window,a=R(),r=Object(S.a)(),i=c.a.useState(!1),o=Object(j.a)(i,2),s=o[0],l=o[1],d=[T("Google","ABC Dental","2101 California St.","111.111.111","3/5","Yes","Active"),T("Yelp","ABC Dental","2101 California St.","111.111.111","2/5","No","Inactive"),T("Yahoo!","ABC Dental","2101 California St.","111.111.111","3/5","No","Inactive"),T("Foursquare","ABC Dental","2101 California St.","111.111.111","2/5","No","Active"),T("Facebook","ABC Dental","2101 California St.","111.111.111","3/5","No","Active")],u=Object(n.jsxs)("div",{children:[Object(n.jsx)("div",{className:a.toolbar}),Object(n.jsx)(h.a,{}),Object(n.jsx)(x.a,{children:["Dashboard","Website","Visitors","Reviews"].map((function(e,t){return Object(n.jsxs)(O.a,{button:!0,children:[Object(n.jsx)(f.a,{children:t%2===0?Object(n.jsx)(g.a,{}):Object(n.jsx)(k.a,{})}),Object(n.jsx)(v.a,{primary:e})]},e)}))}),Object(n.jsx)(h.a,{}),Object(n.jsx)(x.a,{children:["Listings","Appoinments","Settings"].map((function(e,t){return Object(n.jsxs)(O.a,{button:!0,children:[Object(n.jsx)(f.a,{children:t%2===0?Object(n.jsx)(g.a,{}):Object(n.jsx)(B.a,{})}),Object(n.jsx)(v.a,{primary:e})]},e)}))})]}),w=void 0!==t?function(){return t().document.body}:void 0;return Object(n.jsxs)("div",{className:a.root,children:[Object(n.jsx)(p.a,{}),Object(n.jsxs)("nav",{className:a.drawer,"aria-label":"mailbox folders",children:[Object(n.jsx)(m.a,{smUp:!0,implementation:"css",children:Object(n.jsx)(b.a,{container:w,variant:"temporary",anchor:"rtl"===r.direction?"right":"left",open:s,onClose:function(){l(!s)},classes:{paper:a.drawerPaper},ModalProps:{keepMounted:!0},children:u})}),Object(n.jsx)(m.a,{xsDown:!0,implementation:"css",children:Object(n.jsx)(b.a,{classes:{paper:a.drawerPaper},variant:"permanent",open:!0,children:u})})]}),Object(n.jsxs)("main",{className:a.content,children:[Object(n.jsx)("div",{className:a.toolbar}),Object(n.jsx)(_.a,{component:P.a,children:Object(n.jsxs)(C.a,{className:a.table,"aria-label":"simple table",children:[Object(n.jsx)(L.a,{children:Object(n.jsxs)(I.a,{children:[Object(n.jsx)(N.a,{align:"right",children:" "}),Object(n.jsx)(N.a,{align:"right",children:"Source"}),Object(n.jsx)(N.a,{align:"right",children:"Name"}),Object(n.jsx)(N.a,{align:"right",children:"Address"}),Object(n.jsx)(N.a,{align:"right",children:"Phone"}),Object(n.jsx)(N.a,{align:"right",children:"Rating"}),Object(n.jsx)(N.a,{align:"right",children:"Listed"}),Object(n.jsx)(N.a,{align:"right",children:"Status"}),Object(n.jsx)(N.a,{align:"right",children:"Action"})]})}),Object(n.jsx)(A.a,{children:d.map((function(e){return Object(n.jsxs)(I.a,{children:[Object(n.jsx)(N.a,{component:"th",scope:"row",children:e.name}),Object(n.jsx)(N.a,{align:"right",children:e.Icon}),Object(n.jsx)(N.a,{align:"right",children:e.Source}),Object(n.jsx)(N.a,{align:"right",children:e.Name}),Object(n.jsx)(N.a,{align:"right",children:e.Address}),Object(n.jsx)(N.a,{align:"right",children:e.Phone}),Object(n.jsx)(N.a,{align:"right",children:e.Rating}),Object(n.jsx)(N.a,{align:"right",children:e.Listed}),Object(n.jsx)(N.a,{align:"right",children:e.Status}),Object(n.jsx)(N.a,{align:"right",children:e.Action})]},e.name)}))})]})})]})]})},X=a(46),G=a(136);var z=function(e){return function(t){t.isLoading;var a=Object(G.a)(t,["isLoading"]);return null===localStorage.getItem("access_token")?Object(n.jsx)("p",{style:{fontSize:"25px"},children:"Please Login to view listings..."}):Object(n.jsx)(e,Object(X.a)({},a))}},F=a(58),E=a.n(F),U=a(92),Y=a(55),J=a.n(Y),q="https://simplecrm.pythonanywhere.com/api/",V=J.a.create({baseURL:q,timeout:5e3,headers:{Authorization:"Bearer "+localStorage.getItem("access_token"),"Content-Type":"application/json",accept:"application/json"}});V.interceptors.response.use((function(e){return e}),function(){var e=Object(U.a)(E.a.mark((function e(t){var a,n,r,c;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.config,"undefined"!==typeof t.response){e.next=4;break}return alert("A server/network error occurred. Looks like CORS might be the problem. Sorry about this - we will get it fixed shortly."),e.abrupt("return",Promise.reject(t));case 4:if(401!==t.response.status||a.url!==q+"token/refresh/"){e.next=7;break}return window.location.href="/login/",e.abrupt("return",Promise.reject(t));case 7:if("token_not_valid"!==t.response.data.code||401!==t.response.status||"Unauthorized"!==t.response.statusText){e.next=23;break}if(!(n=localStorage.getItem("refresh_token"))){e.next=21;break}if(r=JSON.parse(atob(n.split(".")[1])),c=Math.ceil(Date.now()/1e3),console.log(r.exp),!(r.exp>c)){e.next=17;break}return e.abrupt("return",V.post("/token/refresh/",{refresh:n}).then((function(e){return localStorage.setItem("access_token",e.data.access),localStorage.setItem("refresh_token",e.data.refresh),V.defaults.headers.Authorization="JWT "+e.data.access,a.headers.Authorization="JWT "+e.data.access,V(a)})).catch((function(e){console.log(e)})));case 17:console.log("Refresh token is expired",r.exp,c),window.location.href="/login/";case 19:e.next=23;break;case 21:console.log("Refresh token not available."),window.location.href="/login/";case 23:return e.abrupt("return",Promise.reject(t));case 24:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());var K=V;var Q=function(){var e=z(M),t=Object(r.useState)({loading:!1,posts:null}),a=Object(j.a)(t,2),c=a[0],i=a[1];return Object(r.useEffect)((function(){K.get().then((function(e){var t=e.data;i({loading:!1,posts:t}),console.log(e.data)}))}),[i]),Object(n.jsxs)("div",{className:"App",children:[Object(n.jsx)("h1",{children:"Listings"}),Object(n.jsx)(e,{isLoading:c.loading,posts:c.posts})]})},Z=a(266),H=a(267),$=a(67),ee=a(268),te=a(269),ae=(a(180),Object(y.a)((function(e){return{appBar:{borderBottom:"1px solid ".concat(e.palette.divider)},link:{margin:e.spacing(1,1.5)},toolbarTitle:{flexGrow:1}}})));var ne=function(){var e=ae(),t=(Object(l.f)(),Object(r.useState)({search:""})),a=Object(j.a)(t,2),i=(a[0],a[1],Object(r.useState)("")),o=Object(j.a)(i,2),d=o[0],h=o[1];return Object(r.useEffect)((function(){h(localStorage.getItem("access_token"))}),[d]),Object(n.jsxs)(c.a.Fragment,{children:[Object(n.jsx)(p.a,{}),Object(n.jsx)(Z.a,{position:"static",color:"default",elevation:0,className:e.appBar,children:Object(n.jsxs)(H.a,{className:e.toolbar,children:[Object(n.jsx)($.a,{variant:"h6",color:"inherit",noWrap:!0,className:e.toolbarTitle,children:Object(n.jsx)(ee.a,{component:s.b,to:"/",underline:"none",color:"textPrimary",children:"GROWTH PLUG"})}),Object(n.jsx)("nav",{children:null===d?Object(n.jsxs)("div",{children:[Object(n.jsx)(te.a,{color:"Primary",variant:"outlined",className:e.link,component:s.b,to:"/register",children:"Register"}),Object(n.jsx)(te.a,{color:"primary",variant:"outlined",className:e.link,component:s.b,to:"/login",children:"Login"})]}):Object(n.jsx)(te.a,{href:"#",color:"primary",variant:"outlined",className:e.link,component:s.b,to:"/logout",children:"Logout"})})]})})]})},re=a(270),ce=a(271),ie=a(276),oe=Object(y.a)((function(e){return{footer:Object(d.a)({borderTop:"1px solid ".concat(e.palette.divider),marginTop:e.spacing(8),paddingTop:e.spacing(3),paddingBottom:e.spacing(3)},e.breakpoints.up("sm"),{paddingTop:e.spacing(6),paddingBottom:e.spacing(6)})}}));function se(){return Object(n.jsxs)($.a,{variant:"body2",color:"textSecondary",align:"center",children:["Copyright \xa9 ",Object(n.jsx)(ee.a,{color:"inherit",href:"https://material-ui.com/",children:"simplecrm.pythonanywhere.com"})," ",(new Date).getFullYear(),"."]})}var le=[];var je=function(){var e=oe();return Object(n.jsx)(c.a.Fragment,{children:Object(n.jsxs)(re.a,{maxWidth:"md",component:"footer",className:e.footer,children:[Object(n.jsx)(ce.a,{container:!0,spacing:4,justify:"space-evenly",children:le.map((function(e){return Object(n.jsxs)(ce.a,{item:!0,xs:6,sm:3,children:[Object(n.jsx)($.a,{variant:"h6",color:"textPrimary",gutterBottom:!0,children:e.title}),Object(n.jsx)("ul",{children:e.description.map((function(e){return Object(n.jsx)("li",{children:Object(n.jsx)(ee.a,{href:"#",variant:"subtitle1",color:"textSecondary",children:e})},e)}))})]},e.title)}))}),Object(n.jsx)(ie.a,{mt:5,children:Object(n.jsx)(se,{})})]})})},de=a(277),pe=a(272),he=Object(y.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)}}}));var be=J.a.create({baseURL:"https://simplecrm.pythonanywhere.com/",timeout:5e3,headers:{"Content-Type":"application/json",accept:"application/json"}}),me=a(135),ue=a.n(me),ge=function(e){console.log(e),J.a.post("https://simplecrm.pythonanywhere.com/auth/convert-token",{token:e,backend:"facebook",grant_type:"convert_token",client_id:"JzOnfTdgg4Y9ZbxRkKpqX36L4je7oMB244iLEDec",client_secret:"Yebg4LL341MuXS7iv7MSAkUjde28vmj4GQ4FR1ldIl7bjPtGKCgBdrAnYmDZGrWEiucf9FpcP24jlPQXLMxr1WjVomjvhA93iGx8XMS9g0R2k56XI5u11tDwHJXaXz9m"}).then((function(e){localStorage.setItem("access_token",e.data.access_token),localStorage.setItem("refresh_token",e.data.refresh_token),window.location.href="https://simplecrm.pythonanywhere.com/"}))},xe=Object(y.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));var Oe=Object(n.jsx)(s.a,{children:Object(n.jsxs)(c.a.StrictMode,{children:[Object(n.jsx)(ne,{}),Object(n.jsxs)(l.c,{children:[Object(n.jsx)(l.a,{exact:!0,path:"/",component:Q}),Object(n.jsx)(l.a,{path:"/register",component:function(){var e=Object(l.f)(),t=Object.freeze({email:"",username:"",password:""}),a=Object(r.useState)(t),c=Object(j.a)(a,2),i=c[0],o=c[1],s=function(e){o(Object(X.a)(Object(X.a)({},i),{},Object(d.a)({},e.target.name,e.target.value.trim())))},h=he();return Object(n.jsxs)(re.a,{component:"main",maxWidth:"xs",children:[Object(n.jsx)(p.a,{}),Object(n.jsxs)("div",{className:h.paper,children:[Object(n.jsx)(de.a,{className:h.avatar}),Object(n.jsx)($.a,{component:"h1",variant:"h5",children:"Sign up"}),Object(n.jsxs)("form",{className:h.form,noValidate:!0,children:[Object(n.jsxs)(ce.a,{container:!0,spacing:2,children:[Object(n.jsx)(ce.a,{item:!0,xs:12,children:Object(n.jsx)(pe.a,{variant:"outlined",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",onChange:s})}),Object(n.jsx)(ce.a,{item:!0,xs:12,children:Object(n.jsx)(pe.a,{variant:"outlined",required:!0,fullWidth:!0,id:"username",label:"Username",name:"username",autoComplete:"username",onChange:s})}),Object(n.jsx)(ce.a,{item:!0,xs:12,children:Object(n.jsx)(pe.a,{variant:"outlined",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",onChange:s})})]}),Object(n.jsx)(te.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:h.submit,onClick:function(t){t.preventDefault(),console.log(i),K.post("user/create/",{email:i.email,user_name:i.username,password:i.password}).then((function(t){e.push("/login"),console.log(t),console.log(t.data)}))},children:"Sign Up"}),Object(n.jsx)(ce.a,{container:!0,justify:"flex-end",children:Object(n.jsx)(ce.a,{item:!0,children:Object(n.jsx)(ee.a,{href:"https://simplecrm.pythonanywhere.com/login",variant:"body2",children:"Already have an account? Sign in"})})})]})]})]})}}),Object(n.jsx)(l.a,{path:"/login",component:function(){var e=Object(l.f)(),t=Object.freeze({email:"",password:""}),a=Object(r.useState)(t),c=Object(j.a)(a,2),i=c[0],o=c[1],s=function(e){o(Object(X.a)(Object(X.a)({},i),{},Object(d.a)({},e.target.name,e.target.value.trim())))},h=function(){var e=Object(U.a)(E.a.mark((function e(t){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ge(t.accessToken);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=xe();return Object(n.jsxs)(re.a,{component:"main",maxWidth:"xs",children:[Object(n.jsx)(p.a,{}),Object(n.jsxs)("div",{className:b.paper,children:[Object(n.jsx)(de.a,{className:b.avatar}),Object(n.jsx)($.a,{component:"h1",variant:"h5",children:"Sign in"}),Object(n.jsxs)("form",{className:b.form,noValidate:!0,children:[Object(n.jsx)(pe.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0,onChange:s}),Object(n.jsx)(pe.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",onChange:s}),Object(n.jsx)(te.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:b.submit,onClick:function(t){t.preventDefault(),console.log(i),be.post("auth/token/",{grant_type:"password",username:i.email,password:i.password,client_id:"JzOnfTdgg4Y9ZbxRkKpqX36L4je7oMB244iLEDec",client_secret:"Yebg4LL341MuXS7iv7MSAkUjde28vmj4GQ4FR1ldIl7bjPtGKCgBdrAnYmDZGrWEiucf9FpcP24jlPQXLMxr1WjVomjvhA93iGx8XMS9g0R2k56XI5u11tDwHJXaXz9m"}).then((function(t){localStorage.setItem("access_token",t.data.access_token),localStorage.setItem("refresh_token",t.data.refresh_token),e.push("/"),window.location.reload()}))},children:"Sign In"}),Object(n.jsx)(ue.a,{appId:"2355564651244781",fields:"name,email,picture",callback:h}),Object(n.jsxs)(ce.a,{container:!0,children:[Object(n.jsx)(ce.a,{item:!0,xs:!0,children:Object(n.jsx)(ee.a,{href:"#",variant:"body2",children:"Forgot password?"})}),Object(n.jsx)(ce.a,{item:!0,children:Object(n.jsx)(ee.a,{href:"https://simplecrm.pythonanywhere.com/register",variant:"body2",children:"Don't have an account? Sign Up"})})]})]})]})]})}}),Object(n.jsx)(l.a,{path:"/logout",component:function(){var e=Object(l.f)();return Object(r.useEffect)((function(){K.post("user/logout/blacklist/",{refresh_token:localStorage.getItem("refresh_token")});localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),K.defaults.headers.Authorization=null,e.push("/login"),window.location.reload()})),Object(n.jsx)("div",{children:"Logout"})}})]}),Object(n.jsx)(je,{})]})});o.a.render(Oe,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[213,1,2]]]);
//# sourceMappingURL=main.5f05b04c.chunk.js.map